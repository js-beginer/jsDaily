<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>jsonp接口</title>
		<script src="jquery-1.9.1.js"></script>
		<style>
			*{
				padding: 0;
				margin: 0;
			}
			html {
				overflow-y: scroll;
			}
			.div1{
				width: 500px;
				margin: 100px auto;
			}
			.text1{
				outline: none;
				border:pink solid 1px; 
				box-shadow:inset 0 0 6px #CCC;
				width:418px; 
				height:16px; 
				font-size:16px; 
				padding:9px 5px;
			}
			.ul1{
				list-style-type: none;
				width: 428px;
				border: 1px solid #817F82;
				margin-top: -1px;
			}
			.li1{
				font-size: 14px;
				padding: 6px 8px;
			}
			#ul1 li:active {
				background-color: rgb(238, 238, 238);
			}
		</style>
		<script>
			$(function () {

				var doJsonp = {
					
					selectedNum:-1,
					
					createList:function(data){
						$('ul').empty();
						for (var i=0;i<data.s.length;i++) {
							var oLi = $("<li></li>");
							$("ul").append(oLi);
							oLi.html(data.s[i]);
						}
					},
					
					bindKeyup:function(){
						var _this = this;			
						$(".text1").keyup(function () {
							var value = $(this).val();
							//获取数据
							$.ajax({
								url:"http://suggestion.baidu.com/su",
								cache:false,
								data:{
									wd:value
								},
								jsonp:"cb",
								dataType:"jsonp",
								success:function(data){
									_this.createList(data);
								}
							})
						})
					},
					bindClick:function(){
						$(".ul1").on("click","li",function () {
							var mytext = this.innerHTML;
							$("input").val(mytext);
							$("li").remove();
						}).on("mouseenter","li",function () {
							$(this).css("backgroundColor","pink");
						}).on("mouseleave","li",function () {
							$(this).css("backgroundColor","white");
						})
						
						
						
						
						
						
						$(".text1").keydown(function (e) {
							var key = e.keyCode;
							if (key===38) {
								console.log("123");
							}else if(key===40){
								
								
								
								$("li:fist").css("backgroundColor","pink");
								$(this).next().css("backgroundColor","pink").siblings().css("backgroundColor","white");
							}
						})
					},
					init:function(){
						this.bindKeyup();
						this.bindClick();
					}
				}
				
				
				doJsonp.init();
					
				
				
			})
			
			/*{
				func1:function(){},
				func2:function(){}""
			}*/
			
		</script>
	</head>
	<body>
		<div class="div1">
			<input type="text" class="text1" />
			<ul class="ul1"></ul>
		</div>
		
	</body>
</html>
